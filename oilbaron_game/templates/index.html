<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="/cdn-cgi/apps/head/jYRtBEG6_98HJv_Q5rNMmXvUW7g.js"></script><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
<title>Tenis</title>
</head>
<body>
<h2>
<div>
<p>Changing oil dispersion rate for:
<p style="color:red">{{name}} </p>
</p>
</div>
<div class="slider">
<input type="range" min="1" max="5" value="2" class="slider" id="myRange">
<p>How much oil do you want to disperse by default?</p>
</div>
<button class="btn btn-primary" id="submit">Submit</button>
<div id="response"></div>
<script>    var name = "{{name}}";
            var slider = document.getElementById("myRange");
            var output = document.getElementById("response");
            output.innerHTML = "Oil dispersion: 2"; // Display the default slider value
            // Update the current slider value (each time you drag the slider handle)

            // send the slider value as post request to /oilchange and write "changed oil diversion to" + slider value to the response div
            slider.oninput = function () {
                output.innerHTML = "Oil dispersion: " + this.value;
            }

            document.getElementById("submit").onclick = function () {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("response").innerHTML = this.responseText;
                    }
                }
                xhttp.open("POST", "/oilchange", true);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.send("name=" + name + "&oil=" + document.getElementById("myRange").value);
                // goto new page after sending
                window.location.href = "/thanks";

            }
        </script>
</h2>
</body>
</html>